{"version":3,"file":"index.js","sources":["../src/global-sensors.js"],"sourcesContent":["const { BatteryMonitor, GlobalSensorMonitor } = require('./monitors')\nconst {\n  serializeBatteryManager,\n  serializeDeviceMotionEvent,\n  serializeDeviceOrientationEvent,\n  serializeNavigator,\n  serializePosition,\n  serializeState\n} = require('./serialziers')\n\nclass Sensor {\n  constructor (opts, monitorClass, serializeFn) {\n\n    if (opts && opts.queryPeriod) {\n      this.queryPeriod = opts.queryPeriod\n    } else {\n      this.queryPeriod = 0\n    }\n\n    const monitor = new monitorClass({queryPeriod: this.queryPeriod}).startListening()\n\n    this.serialize = serializeFn.bind(this)\n\n    this.listeners = []\n    setInterval(() => {\n      const state = monitor.state\n      this.listeners.forEach(listener => listener.call(null, state))\n    }, this.queryPeriod)\n  }\n\n  listen (newListener) {\n    this.listeners.push(newListener)\n  }\n\n  clearListeners () {\n    this.listeners = []\n  }\n}\n\nexport class GlobalSensor extends Sensor {\n  constructor (opts) {\n    super(opts, GlobalSensorMonitor, serializeState)\n  }\n}\n\nexport class BatteryMonitorSensor extends Sensor {\n  constructor (opts) {\n    super(opts, BatteryMonitor, serializeBatteryManager)\n  }\n}\n\nexport {\n  serializeState,\n  serializeBatteryManager,\n  serializePosition,\n  serializeDeviceOrientationEvent,\n  serializeDeviceMotionEvent,\n  serializeNavigator\n}\n"],"names":[],"mappings":";;;;;;EAAA,MAAM,EAAE,cAAc,EAAE,mBAAmB,EAAE,GAAG,OAAO,CAAC,YAAY,EAAC;EACrE,MAAM;EACN,EAAE,uBAAuB;EACzB,EAAE,0BAA0B;EAC5B,EAAE,+BAA+B;EACjC,EAAE,kBAAkB;EACpB,EAAE,iBAAiB;EACnB,EAAE,cAAc;EAChB,CAAC,GAAG,OAAO,CAAC,eAAe,EAAC;;EAE5B,MAAM,MAAM,CAAC;EACb,EAAE,WAAW,CAAC,CAAC,IAAI,EAAE,YAAY,EAAE,WAAW,EAAE;;EAEhD,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,WAAW,EAAE;EAClC,MAAM,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAW;EACzC,KAAK,MAAM;EACX,MAAM,IAAI,CAAC,WAAW,GAAG,EAAC;EAC1B,KAAK;;EAEL,IAAI,MAAM,OAAO,GAAG,IAAI,YAAY,CAAC,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,cAAc,GAAE;;EAEtF,IAAI,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,EAAC;;EAE3C,IAAI,IAAI,CAAC,SAAS,GAAG,GAAE;EACvB,IAAI,WAAW,CAAC,MAAM;EACtB,MAAM,MAAM,KAAK,GAAG,OAAO,CAAC,MAAK;EACjC,MAAM,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,EAAC;EACpE,KAAK,EAAE,IAAI,CAAC,WAAW,EAAC;EACxB,GAAG;;EAEH,EAAE,MAAM,CAAC,CAAC,WAAW,EAAE;EACvB,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,EAAC;EACpC,GAAG;;EAEH,EAAE,cAAc,CAAC,GAAG;EACpB,IAAI,IAAI,CAAC,SAAS,GAAG,GAAE;EACvB,GAAG;EACH,CAAC;;AAED,EAAO,MAAM,YAAY,SAAS,MAAM,CAAC;EACzC,EAAE,WAAW,CAAC,CAAC,IAAI,EAAE;EACrB,IAAI,KAAK,CAAC,IAAI,EAAE,mBAAmB,EAAE,cAAc,EAAC;EACpD,GAAG;EACH,CAAC;;AAED,EAAO,MAAM,oBAAoB,SAAS,MAAM,CAAC;EACjD,EAAE,WAAW,CAAC,CAAC,IAAI,EAAE;EACrB,IAAI,KAAK,CAAC,IAAI,EAAE,cAAc,EAAE,uBAAuB,EAAC;EACxD,GAAG;EACH,CAAC;;;;;;;;;;;;;;;;;;;"}