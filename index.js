!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.allsensors={})}(this,function(e){"use strict";var t=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},i=Object.freeze({default:t,__moduleExports:t}),n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r="object"==typeof n&&n&&n.Object===Object&&n,o=Object.freeze({default:r,__moduleExports:r}),a=o&&r||o,s="object"==typeof self&&self&&self.Object===Object&&self,c=a||s||Function("return this")(),l=Object.freeze({default:c,__moduleExports:c}),u=l&&c||l,d=function(){return u.Date.now()},f=Object.freeze({default:d,__moduleExports:d}),g=u.Symbol,v=Object.freeze({default:g,__moduleExports:g}),h=v&&g||v,p=Object.prototype,m=p.hasOwnProperty,y=p.toString,b=h?h.toStringTag:void 0;var w=function(e){var t=m.call(e,b),i=e[b];try{e[b]=void 0;var n=!0}catch(e){}var r=y.call(e);return n&&(t?e[b]=i:delete e[b]),r},j=Object.freeze({default:w,__moduleExports:w}),z=Object.prototype.toString;var O=function(e){return z.call(e)},x=Object.freeze({default:O,__moduleExports:O}),_=j&&w||j,E=x&&O||x,T="[object Null]",S="[object Undefined]",P=h?h.toStringTag:void 0;var q=function(e){return null==e?void 0===e?S:T:P&&P in Object(e)?_(e):E(e)},A=Object.freeze({default:q,__moduleExports:q});var L=function(e){return null!=e&&"object"==typeof e},M=Object.freeze({default:L,__moduleExports:L}),N=A&&q||A,k=M&&L||M,C="[object Symbol]";var G=function(e){return"symbol"==typeof e||k(e)&&N(e)==C},I=Object.freeze({default:G,__moduleExports:G}),$=i&&t||i,W=I&&G||I,B=NaN,D=/^\s+|\s+$/g,R=/^[-+]0x[0-9a-f]+$/i,V=/^0b[01]+$/i,F=/^0o[0-7]+$/i,H=parseInt;var U=function(e){if("number"==typeof e)return e;if(W(e))return B;if($(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=$(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(D,"");var i=V.test(e);return i||F.test(e)?H(e.slice(2),i?2:8):R.test(e)?B:+e},J=Object.freeze({default:U,__moduleExports:U}),K=f&&d||f,Q=J&&U||J,X="Expected a function",Y=Math.max,Z=Math.min;var ee=function(e,t,i){var n,r,o,a,s,c,l=0,u=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError(X);function g(t){var i=n,o=r;return n=r=void 0,l=t,a=e.apply(o,i)}function v(e){var i=e-c;return void 0===c||i>=t||i<0||d&&e-l>=o}function h(){var e=K();if(v(e))return p(e);s=setTimeout(h,function(e){var i=t-(e-c);return d?Z(i,o-(e-l)):i}(e))}function p(e){return s=void 0,f&&n?g(e):(n=r=void 0,a)}function m(){var e=K(),i=v(e);if(n=arguments,r=this,c=e,i){if(void 0===s)return function(e){return l=e,s=setTimeout(h,t),u?g(e):a}(c);if(d)return s=setTimeout(h,t),g(c)}return void 0===s&&(s=setTimeout(h,t)),a}return t=Q(t)||0,$(i)&&(u=!!i.leading,o=(d="maxWait"in i)?Y(Q(i.maxWait)||0,t):o,f="trailing"in i?!!i.trailing:f),m.cancel=function(){void 0!==s&&clearTimeout(s),l=0,n=c=r=s=void 0},m.flush=function(){return void 0===s?a:p(K())},m},te=Object.freeze({default:ee,__moduleExports:ee}),ie=te&&ee||te,ne="Expected a function";var re=function(e,t,i){var n=!0,r=!0;if("function"!=typeof e)throw new TypeError(ne);return $(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),ie(e,t,{leading:n,maxWait:t,trailing:r})};class oe{constructor(){this.state={}}initialize(e){void 0!==e&&null!==e||(e=0),this.queryPeriod=e;const t={state:this.state,queryPeriod:e,throttlify:0===e?e=>e:this.throttlify.bind(this)};return new ae(t).initialize(),new se(t).initialize(),new ce(t).initialize(),new le(t).initialize(),new ue(t).initialize(),new de(t).initialize(),new fe(t).initialize(),new ge(t).initialize(),this}throttlify(e){return re(e,this.queryPeriod)}}class ae{constructor(e){Object.assign(this,e)}initialize(){navigator.getBattery&&navigator.getBattery().then(e=>{this.state.battery=e,e.addEventListener("chargingchange",()=>{this.state.battery=e})})}}class se{constructor(e){Object.assign(this,e)}initialize(){navigator.geolocation&&navigator.geolocation.watchPosition(e=>{this.state.geo=e},()=>void 0,{enableHighAccuracy:!0,timeout:this.queryPeriod,maximumAge:0})}}class ce{constructor(e){Object.assign(this,e)}initialize(){window.addEventListener("deviceorientation",this.throttlify(e=>{this.state.deviceorientation=e}),!1)}}class le{constructor(e){Object.assign(this,e)}initialize(){window.addEventListener("devicemotion",this.throttlify(e=>{this.state.devicemotion=e}),!1)}}class ue{constructor(e){Object.assign(this,e)}initialize(){window.addEventListener("devicelight",this.throttlify(e=>{this.state.devicelight=e}),!1)}}class de{constructor(e){Object.assign(this,e)}initialize(){window.addEventListener("deviceproximity",this.throttlify(e=>{this.state.deviceproximity=e}),!1)}}class fe{constructor(e){Object.assign(this,e)}initialize(){if("AmbientLightSensor"in window){const e=new window.AmbientLightSensor;e.onreading=(()=>{this.state.lightlevel=e}),e.onerror=(e=>{console.error("No light sensor",e.error.name,e.error.message)}),e.start()}}}class ge{constructor(e){Object.assign(this,e)}initialize(){setTimeout(()=>{this.state.navigator=navigator},this.queryPeriod)}}function ve({alpha:e,beta:t,gamma:i,absolute:n,bubbles:r,timeStamp:o}){return{alpha:e,beta:t,gamma:i,absolute:n,bubbles:r,timeStamp:o}}e.GlobalSensor=class{constructor(e){this.listeners=[],e&&e.queryPeriod&&(this.queryPeriod=e.queryPeriod);const t=(new oe).initialize(this.queryPeriod);setInterval(()=>{const e=t.state;this.listeners.forEach(t=>t.call(null,e))},this.queryPeriod)}listen(e){this.listeners.push(e)}clearListeners(){this.listeners=[]}},e.serializeState=function(e){const t={};return e.battery&&(t.battery=function({charging:e,chargingTime:t,dischargingTime:i,level:n}){return{charging:e,chargingTime:t,dischargingTime:i,level:n}}(e.battery)),e.geo&&(t.geo=function({coords:e}){const{latitude:t,longitude:i,altitude:n,accuracy:r,speed:o,altitudeAccuracy:a,heading:s}=e;return{coords:{latitude:t,longitude:i,altitude:n,accuracy:r,speed:o,altitudeAccuracy:a,heading:s}}}(e.geo)),e.deviceorientation&&(t.deviceorientation=ve(e.deviceorientation)),e.devicemotion&&(t.devicemotion=function({acceleration:e,accelerationIncludingGravity:t,interval:i,rotationRate:n,timeStamp:r}){return{acceleration:{x:e.x,y:e.y,z:e.z},accelerationIncludingGravity:{x:t.x,y:t.y,z:t.z},interval:i,rotationRate:{alpha:n.alpha,beta:n.beta,gamma:n.gamma},timeStamp:r}}(e.devicemotion)),e.navigator&&(t.navigator=function({appCodeName:e,appVersion:t,deviceMemory:i,hardwareConcurrency:n,appName:r,languages:o,language:a,platform:s,product:c,userAgent:l,vendor:u,connection:d}){return{appCodeName:e,appVersion:t,deviceMemory:i,hardwareConcurrency:n,appName:r,languages:o,language:a,platform:s,product:c,userAgent:l,vendor:u,connection:d?{downlink:d.downlink,downlinkMax:d.downlinkMax,effectiveType:d.effectiveType,type:d.type}:null}}(e.navigator)),t},e.serializeDeviceOrientationEvent=ve,e.GlobalSensorMonitor=oe,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
